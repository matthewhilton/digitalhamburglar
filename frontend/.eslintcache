[{"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\index.tsx":"1","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Pages\\offerList.tsx":"2","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Components\\offerCard.tsx":"3","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\App.tsx":"4","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Pages\\mainPage.tsx":"5","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Pages\\offerRedemption.tsx":"6","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\reportWebVitals.ts":"7"},{"size":500,"mtime":1609658605030,"results":"8","hashOfConfig":"9"},{"size":1569,"mtime":1610002551338,"results":"10","hashOfConfig":"9"},{"size":645,"mtime":1609859874725,"results":"11","hashOfConfig":"9"},{"size":833,"mtime":1609951384354,"results":"12","hashOfConfig":"9"},{"size":2442,"mtime":1609951152852,"results":"13","hashOfConfig":"9"},{"size":3220,"mtime":1609861037131,"results":"14","hashOfConfig":"9"},{"size":425,"mtime":1609658605030,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"1qzerut",{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"18"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\index.tsx",[],["32","33"],"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Pages\\offerList.tsx",["34"],"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Components\\offerCard.tsx",[],"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\App.tsx",[],"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Pages\\mainPage.tsx",["35"],"C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\Pages\\offerRedemption.tsx",["36","37"],"import { useLocation, useHistory} from 'react-router-dom'\r\nimport { useEffect, useState } from 'react'\r\nimport { OfferCode } from \"./../../interfaces\"\r\nimport bwipjs from \"bwip-js\"\r\nimport { Accordion, AccordionPanel, Box, Button, Card, CardBody, CardFooter, CardHeader, Heading, Text } from 'grommet'\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n  }\r\n\r\nconst OfferRedemption = (props: any) => {\r\n    const query = useQuery();\r\n    const id = query.get(\"id\");\r\n    const propositionId = query.get(\"propositionId\");\r\n\r\n    const [code, setCode] = useState<OfferCode | null>(null);\r\n    const [error, setError] = useState<String | null>(null)\r\n\r\n    const history = useHistory();\r\n\r\n    const loadCodeData = () => {\r\n        setCode(null)\r\n        // @ts-ignore \r\n        const env = process.env\r\n        fetch(env.REACT_APP_API_ENDPOINT + \"/getOfferCode?offerId=\" + id + \"&propositionId=\" + propositionId).then(response => {\r\n            if(response.status == 200){\r\n                response.json().then((data) => {\r\n                    setCode(data)\r\n                })\r\n            } else {\r\n                setError(\"Error getting redemption code\")\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadCodeData();\r\n    }, [id, propositionId]);\r\n\r\n    useEffect(() => {\r\n        if(code != null){\r\n            const options : bwipjs.ToBufferOptions = {\r\n                bcid: \"azteccode\",\r\n                text: code.barcodeData\r\n            } \r\n            bwipjs.toCanvas(\"codeCanvas\", options)\r\n        }\r\n    }, [code])\r\n\r\n    return(\r\n        <div>\r\n\r\n            <Box>\r\n                <Card background=\"light-1\" pad=\"small\" align=\"center\">\r\n                    <CardHeader>\r\n                        <Heading>{code?.code}</Heading> \r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        <canvas id=\"codeCanvas\" style={{width: '100%', height: '100%', maxWidth: 300, maxHeight: 300}} />\r\n                    </CardBody>\r\n                    <CardFooter pad=\"small\">\r\n                        <Button primary onClick={loadCodeData} disabled={code===null} label=\"Refresh Code\" /> \r\n                    </CardFooter>\r\n               </Card>\r\n            </Box>\r\n\r\n            {error != null ? <Text> {error} </Text> : null }\r\n            <Accordion>\r\n                <AccordionPanel label=\"Not working?\">\r\n                    <Box pad=\"medium\" background=\"light-2\">\r\n                        <Text>\r\n                            Someone else might have requested a code for this offer recently, overriding the one you currently see on your page. \r\n                            To fix this refresh the code, or select a different offer.\r\n                        </Text>\r\n                        <Box direction=\"row\" gap=\"small\">\r\n                            <Button primary onClick={loadCodeData} disabled={code===null} label=\"Refresh Code\" /> \r\n                            <Button onClick={() => history.push(\"/\")} label=\"Select Another Offer\" />\r\n                        </Box>\r\n                    </Box>\r\n                </AccordionPanel>\r\n            </Accordion>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default OfferRedemption;","C:\\Users\\Matt\\Documents\\Github\\cheapskate\\frontend\\src\\reportWebVitals.ts",[],{"ruleId":"38","replacedBy":"39"},{"ruleId":"40","replacedBy":"41"},{"ruleId":"42","severity":1,"message":"43","line":27,"column":58,"nodeType":"44","messageId":"45","endLine":27,"endColumn":60},{"ruleId":"46","severity":1,"message":"47","line":3,"column":30,"nodeType":"48","messageId":"49","endLine":3,"endColumn":36},{"ruleId":"50","severity":1,"message":"51","line":26,"column":32,"nodeType":"52","messageId":"53","endLine":26,"endColumn":34},{"ruleId":"54","severity":1,"message":"55","line":38,"column":8,"nodeType":"56","endLine":38,"endColumn":27,"suggestions":"57"},"no-native-reassign",["58"],"no-negated-in-lhs",["59"],"array-callback-return","Array.prototype.filter() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","@typescript-eslint/no-unused-vars","'Button' is defined but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadCodeData'. Either include it or remove the dependency array.","ArrayExpression",["60"],"no-global-assign","no-unsafe-negation",{"desc":"61","fix":"62"},"Update the dependencies array to be: [id, loadCodeData, propositionId]",{"range":"63","text":"64"},[1279,1298],"[id, loadCodeData, propositionId]"]